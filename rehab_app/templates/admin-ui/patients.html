<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patients</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='patients.css') }}">
</head>
<body>
    {% if session['password'] == 'admin'%}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/dashboard/{{id}}">Dashboard</a></li>
                <li><a href="/patients/{{id}}">Patients</a></li>
                <li><a href="/staff/{{id}}">Staff</a></li>
                <li><a href="/resources/{{id}}">Resources</a></li>
                <li><a href="/reports/{{id}}">Reports & Analytics</a></li>
                <li><a href="/notifications/{{id}}">Notification & Alerts</a></li>
                <li><a href="/admin/{{id}}">Administrative tools</a></li>
                <li><a href="/profile/{{id}}">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main>
    <section id="patient-registration">
      <h2>Patient Registration & Discharge</h2>
      <p>Manage patient intake and discharge processes.</p>
      <div>
        <button id="openRegisterModalBtn" class="button">Register New Patient</button>
        <!-- The Registration Modal -->
        <div id="registerModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <h4 class="modal-title">Patient Registration Form</h4>
                <span class="close">&times;</span>
                <div class="registration-card">
                    <form class="form">
                        <div class="form-group">
                            <label for="name">Name*</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="years">Years*</label>
                            <input type="number" id="years" name="years" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender*</label>
                            <select id="gender" name="gender" required>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number*</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="guardian">Guardian's Phone Number*</label>
                            <input type="tel" id="guardian" name="guardian">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email">
                        </div>
                        <div class="form-group">
                            <label for="history">Medical history</label>
                            <textarea id="history" name="history"></textarea>
                        </div>
                        <button type="submit">Register</button>
                        <button type="reset" class="button">Cancel</button>
                    </form>
                </div>
            </div>
        </div>

        <button id="openDischargeModalBtn" class="button">Discharge Patient</button>
        <!-- The Discharge Modal -->
        <div id="dischargeModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <h4 class="modal-title">Patient Discharge Form</h4>
                <span class="close">&times;</span>
                <div class="discharge-card">
                    <form class="form">
                        <div class="form-group">
                            <label for="discharge-id">Patient ID*</label>
                            <input type="text" id="discharge-id" name="discharge-id" required>
                        </div>
                        <div class="form-group">
                            <label for="discharge-notes">Discharge Notes</label>
                            <textarea id="discharge-notes" name="discharge-notes"></textarea>
                        </div>
                        <button type="submit">Discharge</button>
                        <button type="reset" class="button">Cancel</button>
                    </form>
                </div>
            </div>
        </div>
      </div>
    </section>

    <section id="patient-records">
      <h2>Patient Records & History</h2>
      <p>Access and update patient medical records.</p>
      <div>
          <button id="openViewRecordsModalBtn" class="button">View Patient Records</button>
          <!-- The View Records Modal -->
          <div id="viewRecordsModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">View Patient Records</h4>
                  <span class="close">&times;</span>
                  <div class="view-records-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="view-records-id">Patient ID*</label>
                              <input type="text" id="view-records-id" name="view-records-id" required>
                          </div>
                          <button type="submit">View Records</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>

          <button id="openEditHistoryModalBtn" class="button">Add/Edit Medical History</button>
          <!-- The Edit History Modal -->
          <div id="editHistoryModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">Add/Edit Medical History</h4>
                  <span class="close">&times;</span>
                  <div class="edit-history-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="edit-history-id">Patient ID*</label>
                              <input type="text" id="edit-history-id" name="edit-history-id" required>
                          </div>
                          <div class="form-group">
                              <label for="medical-history">Medical History*</label>
                              <textarea id="medical-history" name="medical-history" required></textarea>
                          </div>
                          <button type="submit">Save</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
    </section>

    <section id="appointment-scheduling">
      <h2>Appointment Scheduling & Tracking</h2>
      <p>Schedule and track patient appointments.</p>
      <div>
          <button id="openScheduleAppointmentModalBtn" class="button">Schedule Appointment</button>
          <!-- The Schedule Appointment Modal -->
          <div id="scheduleAppointmentModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">Schedule Appointment</h4>
                  <span class="close">&times;</span>
                  <div class="schedule-appointment-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="appointment-patient-id">Patient ID*</label>
                              <input type="text" id="appointment-patient-id" name="appointment-patient-id" required>
                          </div>
                          <div class="form-group">
                              <label for="appointment-date">Appointment Date*</label>
                              <input type="date" id="appointment-date" name="appointment-date" required>
                          </div>
                          <div class="form-group">
                              <label for="appointment-time">Appointment Time*</label>
                              <input type="time" id="appointment-time" name="appointment-time" required>
                          </div>
                          <button type="submit">Schedule</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>

          <button id="openViewCalendarModalBtn" class="button">View Appointment Calendar</button>
          <!-- The View Calendar Modal -->
          <div id="viewCalendarModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">View Appointment Calendar</h4>
                  <span class="close">&times;</span>
                  <div class="view-calendar-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="calendar-date">Select Date*</label>
                              <input type="date" id="calendar-date" name="calendar-date" required>
                          </div>
                          <button type="submit">View Calendar</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
    </section>

    <section id="bed-allocation">
      <h2>Bed Allocation & Status</h2>
      <p>Manage bed availability and assignment.</p>
      <div>
          <button id="openViewBedAvailabilityModalBtn" class="button">View Bed Availability</button>
          <!-- The View Bed Availability Modal -->
          <div id="viewBedAvailabilityModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">View Bed Availability</h4>
                  <span class="close">&times;</span>
                  <div class="view-bed-availability-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="bed-availability-date">Bed Number*</label>
                              <input type="number" id="bed-availability-date" name="bed-availability-date" required>
                          </div>
                          <button type="submit">View Availability</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>

          <button id="openAssignBedModalBtn" class="button">Assign Bed to Patient</button>
          <!-- The Assign Bed Modal -->
          <div id="assignBedModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                  <h4 class="modal-title">Assign Bed to Patient</h4>
                  <span class="close">&times;</span>
                  <div class="assign-bed-card">
                      <form class="form">
                          <div class="form-group">
                              <label for="assign-bed-id">Patient ID*</label>
                              <input type="text" id="assign-bed-id" name="assign-bed-id" required>
                          </div>
                          <div class="form-group">
                              <label for="assign-bed-number">Bed Number*</label>
                              <input type="text" id="assign-bed-number" name="assign-bed-number" required>
                          </div>
                          <button type="submit">Assign Bed</button>
                          <button type="reset" class="button">Cancel</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
    </section>
  </main>
    <script>
        // Function to handle modal open and close
        function setupModal(modalId, openBtnId, closeClass) {
            var modal = document.getElementById(modalId);
            var btn = document.getElementById(openBtnId);
            var span = modal.getElementsByClassName(closeClass)[0];

            btn.onclick = function() {
                modal.style.display = "block";
            }

            span.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

        // Register and Discharge Modals
        setupModal("registerModal", "openRegisterModalBtn", "close");
        setupModal("dischargeModal", "openDischargeModalBtn", "close");

        // View Records and Edit History Modals
        setupModal("viewRecordsModal", "openViewRecordsModalBtn", "close");
        setupModal("editHistoryModal", "openEditHistoryModalBtn", "close");

        // Schedule Appointment and View Calendar Modals
        setupModal("scheduleAppointmentModal", "openScheduleAppointmentModalBtn", "close");
        setupModal("viewCalendarModal", "openViewCalendarModalBtn", "close");

        // View Bed Availability and Assign Bed Modals
        setupModal("viewBedAvailabilityModal", "openViewBedAvailabilityModalBtn", "close");
        setupModal("assignBedModal", "openAssignBedModalBtn", "close");
    </script>


    {% elif session['password'] == 'therapist'%}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/dashboard/{{id}}">Dashboard</a></li>
                <li><a href="/patients/{{id}}">Patients</a></li>
                <li><a href="/appointments/{{id}}">Appointments</a></li>
                <li><a href="/resources/{{id}}">Resources & Tools</a></li>
                <li><a href="/profile/{{id}}">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main class="therapists-main">
        <h2>Assigned Patients</h2>
        <table>
            <thead>
                <tr>
                    <th>Patient ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Example row, replace with dynamic content -->
                <tr>
                    <td>1</td>
                    <td>John Doe</td>
                    <td>30</td>
                    <td>Male</td>
                    <td><button class="view-patient-btn" data-patient-id="1">View</button></td>
                </tr>
            </tbody>
        </table>

        <div id="patient-details" style="display:none;">
            <h3>Patient Details</h3>
            <div id="patient-info" class="patient-info">
                <h4>Patient Info</h4>
                <p>Name: John Doe</p>
                <p>Age: 35</p>
                <p>Date of Birth: 1989-01-01</p>
                <button class="create-btn">Admit</button>
                <button class="edit-btn">Discharge</button>
            </div>
            <div id="patient-medical-history" class="patient-info">
                <h4>Medical History</h4>
                <p>This section will display the patient's medical history.</p>
                <button class="create-btn">Create</button>
                <button class="edit-btn">Edit</button>

            </div>
            <div id="treatment-plan" class="patient-info">
                <h4>Treatment Plan</h4>
                <p>This section will display the treatment plan for the patient.</p>
                <button class="create-btn">Create</button>
                <button class="edit-btn">Edit</button>

            </div>
            <div id="progress-notes" class="patient-info">
                <h4>Progress Notes</h4>
                <p>This section will display the patient's progress notes.</p>
                <button class="create-btn">Create</button>
                <button class="edit-btn">Edit</button>

            </div>
            <div id="session-notes" class="patient-info">
                <h4>Session Notes</h4>
                <p>This section will display the patient's session notes.</p>
                <button class="create-btn">Create</button>
                <button class="edit-btn">Edit</button>
                <button class="delete-btn">Delete</button>

            </div>
        </div>

        <div id="modal-container" style="display:none;">
            <div class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <h2 id="modal-title"></h2>
                    <form id="modal-form">
                        <div class="form-group">
                            <label for="modal-input">Input:</label>
                            <input type="text" id="modal-input" name="modal-input" required>
                        </div>
                        <button type="submit" id="modal-submit-btn"></button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const viewButtons = document.querySelectorAll('.view-patient-btn');

            viewButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const patientId = button.getAttribute('data-patient-id');

                    // Show the patient-details div
                    const patientDetailsDiv = document.getElementById('patient-details');
                    patientDetailsDiv.style.display = 'block';

                    // Optionally, load patient details dynamically using patientId
                    // Example: fetch patient details from server and update the div content
                    // fetch(`/get-patient-details/${patientId}`)
                    //     .then(response => response.json())
                    //     .then(data => {
                    //         // Update the patient-details div with fetched data
                    //         document.getElementById('patient-info').innerHTML = `
                    //             <p>Name: ${data.name}</p>
                    //             <p>Age: ${data.age}</p>
                    //             <p>Gender: ${data.gender}</p>
                    //         `;
                    //     });
                });
            });
        });
    </script>

    {% else %}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/">Dashboard</a></li>
                <li><a href="/about">Patients</a></li>
                <li><a href="/services">Therapists</a></li>
                <li><a href="/resources">Appointments</a></li>
                <li><a href="/contact">Reports</a></li>
                <li><a href="/login">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main>
        this is the staff dashboard
    </main>

    {% endif %}

</body>
</html>
