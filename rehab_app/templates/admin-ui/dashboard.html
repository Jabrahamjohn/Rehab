<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    {% if session['password'] == 'admin'%}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/dashboard/{{id}}">Dashboard</a></li>
                <li><a href="/patients/{{id}}">Patients</a></li>
                <li><a href="/staff/{{id}}">Staff</a></li>
                <li><a href="/resources/{{id}}">Resources</a></li>
                <li><a href="/reports/{{id}}">Reports & Analytics</a></li>
                <li><a href="/notifications/{{id}}">Notification & Alerts</a></li>
                <li><a href="/admin/{{id}}">Administrative tools</a></li>
                <li><a href="/profile/{{id}}">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="first-deck">
            <div class="card">
                <p>No. of Patients</p>
                <h1>150</h1>
            </div>
            <div class="card">
                <p>No. of Therapists</p>
                <h1>15</h1>
            </div>
            <div class="card">
                <p>Therapists Available</p>
                <h1>10</h1>
            </div>
            <div class="card">
                <p>No. of Slots Available</p>
                <h1>50</h1>
            </div>
        </div>
        <div class="second-deck">
            <div class="appointments" >
                <p>Upcoming Appointments & Events</p>
                <hr>
                <div>
                    <ul>
                        <li>
                            <div class="schedule-content">
                                <p>26-05-2024: 9:00 - 11:30</p>
                                <strong>Board meeting</strong> - Boardroom<br/></p>
                                <hr>
                            </div>
                        </li>

                        <li>
                            <div class="schedule-content">
                                <p>26-05-2024: 9:00 - 11:30</p>
                                <strong>Board meeting</strong> - Boardroom<br/></p>
                                <hr>
                            </div>
                        </li>

                        <li>
                            <div class="schedule-content">
                                <p>26-05-2024: 9:00 - 11:30</p>
                                <strong>Board meeting</strong> - Boardroom<br/></p>
                                <hr>
                            </div>
                        </li>

                        <li>
                            <div class="schedule-content">
                                <p>26-05-2024: 9:00 - 11:30</p>
                                <strong>Board meeting</strong> - Boardroom<br/></p>
                                <hr>
                            </div>
                        </li>

                        <li>
                            <div class="schedule-content">
                                <p>26-05-2024: 9:00 - 11:30<br/>
                                <strong>Board meeting</strong> - Boardroom<br/></p>
                                <hr>
                            </div>
                        </li>

                    </ul>
                </div>
            </div>
            <div class="occupancy">
                <div class="card rate">
                    <p>Occupancy rate</p>
                    <hr>
                    <h1>^ 75%</h1>
                </div>
                <div class="finance">
                    <p>Financial summary</p>
                    <hr>
                    <ul>
                        <li><strong>Revenue:</strong> Ksh 250,000 (This Month)</li>
                        <li><strong>Expenses:</strong>
                          <ul>
                            <li><strong>Payroll:</strong> Ksh 120,000</li>
                            <li><strong>Rent & Utilities:</strong> Ksh 30,000</li>
                            <li><strong>Supplies:</strong> Ksh 15,000</li>
                            <li><strong>Marketing:</strong> Ksh 10,000</li>
                            <li><strong>Other Expenses:</strong> Ksh 25,000</li>
                          </ul>
                        </li>
                        <li><strong>Outstanding Bills:</strong> Ksh 50,000 (Estimated amount owed by patients)</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    {% elif session['password'] == 'therapist'%}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/dashboard/{{id}}">Dashboard</a></li>
                <li><a href="/patients/{{id}}">Patients</a></li>
                <li><a href="/appointments/{{id}}">Appointments</a></li>
                <li><a href="/resources/{{id}}">Resources & Tools</a></li>
                <li><a href="/profile/{{id}}">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main>
          <div class="therapist-dashboard">
            <section class="schedule-appointments">
              <h4>Upcoming Schedule & Appointments</h4>
              <table class="appointment-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Patient</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Tuesday, May 28 2024</td>
                    <td>10:00 AM</td>
                    <td>John Doe</td>
                  </tr>
                  <tr>
                    <td>Wednesday, May 29 2024</td>
                    <td>2:00 PM</td>
                    <td>Jane Smith</td>
                  </tr>
                  <tr>
                    <td>Thursday, May 30 2024</td>
                    <td>9:00 AM</td>
                    <td>Jane Smith</td>
                  </tr>
                  <tr>
                    <td>Friday, May 31 2024</td>
                    <td>11:00 PM</td>
                    <td>Jane Smith</td>
                  </tr>
                  <tr>
                    <td>Saturday, June 1 2024</td>
                    <td>2:00 PM</td>
                    <td>Jane Smith</td>
                  </tr>
                </tbody>
              </table>
              <a href="/appointments/{{id}}">View All Appointments</a>
            </section>
            <section class="patient-progress">
              <h4>Patient Progress Summaries</h4>
              <ul class="patient-list">
                <li>
                  <a href="/patients/progress/john.doe">John Doe</a>
                </li>
                <li>
                  <a href="/patients/progress/jane.smith">Jane Smith</a>
                </li>
                <li>
                  <a href="/patients/progress/jane.smith">Jane Smith</a>
                </li>
                <li>
                  <a href="/patients/progress/jane.smith">Jane Smith</a>
                </li>
                <li>
                  <a href="/patients/progress/jane.smith">Jane Smith</a>
                </li>
              </ul>
              <a href="/patients/progress" class="link">View All Patients</a>
            </section>
            <section class="tasks-todo">
                <h4>Tasks & To-Do List</h4>
                <ul class="task-list" id="task-list">
                  <li>
                    <div class="task"><input type="checkbox"> Prepare progress notes for John Doe's appointment.</div>
                     <div class="edit-task-btn">
                        <a class="edit-btn">Edit </a>|
                        <a class="delete-btn">Delete</a>
                    </div>
                  </li>
                  <li>
                    <div class="task"><input type="checkbox"> Review Jane Smith's therapy plan.</div>
                    <div class="edit-task-btn">
                        <a class="edit-btn">Edit </a>|
                        <a class="delete-btn">Delete</a>
                    </div>
                  </li>
                  <li>
                    <div class="task"><input type="checkbox"> Update treatment plan for Michael Jones.</div>
                    <div class="edit-task-btn">
                        <a class="edit-btn">Edit </a>|
                        <a class="delete-btn" >Delete</a>
                    </div>
                  </li>
                  <li class="add-task">
                    <button id="open-modal-btn" class="button">Add a new task</button>
                  </li>
                </ul>
              </section>

              <!-- Modal -->
              <div id="modal" class="modal">
                <div class="modal-content">
                  <span class="close">&times;</span>
                  <h2 id="modal-title">Add a new task</h2>
                  <input type="text" id="task-input" placeholder="Task description">
                  <button id="save-task-btn">Save</button>
                </div>
              </div>

          </div>
    </main>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
      const openModalBtn = document.getElementById('open-modal-btn');
      const modal = document.getElementById('modal');
      const closeModalSpan = document.getElementsByClassName('close')[0];
      const saveTaskBtn = document.getElementById('save-task-btn');
      const taskInput = document.getElementById('task-input');
      const taskList = document.getElementById('task-list');
      let editMode = false;
      let currentTaskElement;

      // Open modal
      openModalBtn.addEventListener('click', () => {
        modal.style.display = 'block';
        taskInput.value = '';
        editMode = false;
        document.getElementById('modal-title').textContent = 'Add a new task';
      });

      // Close modal
      closeModalSpan.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      // Save task
      saveTaskBtn.addEventListener('click', () => {
        const taskDescription = taskInput.value.trim();
        if (taskDescription) {
          if (editMode) {
            currentTaskElement.querySelector('span').textContent = taskDescription;
          } else {
            const li = document.createElement('li');
            li.innerHTML = `
              <input type="checkbox"> <span>${taskDescription}</span>
              <button class="edit-btn">Edit</button>
              <button class="delete-btn">Delete</button>
            `;
            taskList.insertBefore(li, taskList.querySelector('.add-task'));
          }
          modal.style.display = 'none';
        }
      });

      // Edit task
      taskList.addEventListener('click', (e) => {
        if (e.target.classList.contains('edit-btn')) {
          editMode = true;
          currentTaskElement = e.target.parentElement;
          taskInput.value = currentTaskElement.querySelector('span').textContent;
          modal.style.display = 'block';
          document.getElementById('modal-title').textContent = 'Edit task';
        }
      });

      // Delete task
      taskList.addEventListener('click', (e) => {
        if (e.target.classList.contains('delete-btn')) {
          e.target.parentElement.remove();
        }
      });

      // Close modal if clicked outside
      window.addEventListener('click', (e) => {
        if (e.target == modal) {
          modal.style.display = 'none';
        }
      });
    });
    </script>

    {% else %}
    <header>
        <nav>
            <div class="logo">Rehab</div>
            <ul class="nav-links">
                <li><a href="/">Dashboard</a></li>
                <li><a href="/about">Patients</a></li>
                <li><a href="/services">Therapists</a></li>
                <li><a href="/resources">Appointments</a></li>
                <li><a href="/contact">Reports</a></li>
                <li><a href="/login">Profile</a></li>
            </ul>
        </nav>
    </header>
    <main>
        this is the staff dashboard
    </main>

    {% endif %}

</body>
</html>
